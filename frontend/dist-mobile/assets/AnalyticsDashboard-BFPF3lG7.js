import{r as o,j as s,B as n,C as m,I as y,y as f,T as e,n as v,A as F,S as i,P as c,H as x}from"./react-vendor-CxfKVgr3.js";import{a as E}from"./App-JmJcCWdD.js";import"./vendor-DCH4KwNm.js";function w({onBack:u}){const[p,h]=o.useState(!0),[l,b]=o.useState(""),[a,g]=o.useState(null);return o.useEffect(()=>{let r=!1;async function d(){try{h(!0),b("");const t=await fetch(`${E}/api/analytics/summary`);if(!t.ok)throw new Error(`HTTP ${t.status}`);const j=await t.json();r||g(j)}catch(t){r||b(String(t))}finally{r||h(!1)}}return d(),()=>{r=!0}},[]),s.jsx(n,{sx:{minHeight:"100vh",width:"100%",backgroundColor:"#050705",backgroundImage:"url(/strainspotter-bg.jpg)",backgroundSize:"cover",backgroundPosition:"center",position:"relative"},children:s.jsxs(m,{maxWidth:"md",sx:{pt:"calc(env(safe-area-inset-top) + 20px)",pb:4},children:[s.jsxs(n,{sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[s.jsx(y,{onClick:u,sx:{color:"#C5E1A5"},children:s.jsx(f,{})}),s.jsx(e,{variant:"h4",sx:{color:"#F1F8E9",fontWeight:700},children:"Analytics"})]}),p&&s.jsx(n,{sx:{display:"flex",justifyContent:"center",py:4},children:s.jsx(v,{sx:{color:"#CDDC39"}})}),l&&s.jsx(F,{severity:"error",sx:{mb:3},children:l}),!p&&!l&&a&&s.jsxs(i,{spacing:3,children:[s.jsx(c,{elevation:6,sx:{p:3,background:"rgba(12, 20, 12, 0.95)",border:"1px solid rgba(124, 179, 66, 0.6)",borderRadius:3},children:s.jsxs(e,{variant:"h6",sx:{color:"#F1F8E9",mb:2,fontWeight:600},children:["Total Scans: ",a.totalScans||0]})}),s.jsxs(c,{elevation:6,sx:{p:3,background:"rgba(12, 20, 12, 0.95)",border:"1px solid rgba(124, 179, 66, 0.6)",borderRadius:3},children:[s.jsx(e,{variant:"h6",sx:{color:"#F1F8E9",mb:2,fontWeight:600},children:"Top Strains"}),a.topStrains?.length?s.jsx(i,{spacing:1,children:a.topStrains.map(r=>s.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx(e,{variant:"body1",sx:{color:"#F1F8E9"},children:r.name}),s.jsx(x,{label:r.count,size:"small",color:"success"})]},r.name))}):s.jsx(e,{variant:"body2",sx:{color:"rgba(224, 242, 241, 0.8)"},children:"No strain data yet."})]}),s.jsxs(c,{elevation:6,sx:{p:3,background:"rgba(12, 20, 12, 0.95)",border:"1px solid rgba(124, 179, 66, 0.6)",borderRadius:3},children:[s.jsx(e,{variant:"h6",sx:{color:"#F1F8E9",mb:2,fontWeight:600},children:"Top Brands"}),a.topBrands?.length?s.jsx(i,{spacing:1,children:a.topBrands.map(r=>s.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx(e,{variant:"body1",sx:{color:"#F1F8E9"},children:r.name}),s.jsx(x,{label:r.count,size:"small",color:"success"})]},r.name))}):s.jsx(e,{variant:"body2",sx:{color:"rgba(224, 242, 241, 0.8)"},children:"No brand data yet."})]}),s.jsxs(c,{elevation:6,sx:{p:3,background:"rgba(12, 20, 12, 0.95)",border:"1px solid rgba(124, 179, 66, 0.6)",borderRadius:3},children:[s.jsx(e,{variant:"h6",sx:{color:"#F1F8E9",mb:2,fontWeight:600},children:"THC Potency Distribution"}),s.jsx(i,{spacing:1,children:a.potencyBuckets&&Object.entries(a.potencyBuckets).map(([r,d])=>s.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx(e,{variant:"body1",sx:{color:"#F1F8E9"},children:r==="unknown"?"Unknown":`${r}%`}),s.jsx(x,{label:d,size:"small",color:"success"})]},r))})]})]})]})})}export{w as default};
