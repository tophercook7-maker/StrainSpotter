import{r,j as e,B as i,n as $,P as G,T as o,i as f,S as c,A as H,m as N,y as pe,z as ze,k as He,l as me,D as ie,p as ae,I as V,q as le,E as be,u as Ye,f as De,h as Be,H as X,J as $e,K as Ae,M as ce,N as te,O as Ue,Q,U as Ne,W as Xe,X as Ve,Y as Je,Z as de,_ as qe,$ as we,a0 as oe,a1 as Ee,a2 as he,a3 as xe,a4 as Ke,L as Qe,a5 as Ze,a6 as er,a7 as rr,a8 as tr,C as or,a9 as nr}from"./react-vendor-CxfKVgr3.js";import{s as b,i as sr,a as ue,u as Re}from"./App-JmJcCWdD.js";import{S as je,D as ye,F as Te}from"./ScanWizard-CpU8GmcI.js";import{S as ve}from"./ScanResultCard-Cv4hIP62.js";import Se from"./StrainBrowser-ChteOdTX.js";import{S as ir}from"./SeedVendorFinder-tPICLvgV.js";import ke from"./Groups-C1u7l6VL.js";import Ce,{LOGBOOK_TAB_INDEX as ar}from"./GrowCoach--krqYoX3.js";import Ie from"./GrowerDirectory-eymkC7u0.js";import{u as lr}from"./useCreditBalance-DnPtH5jr.js";import cr from"./BuyScansModal-BsHu5l_I.js";import{i as dr}from"./roles-BG0liTN4.js";import"./vendor-DCH4KwNm.js";import"./BackHeader-jnSvreF0.js";import"./useCanScan-Cd4tphRX.js";import"./useStrainImage-pCt_md2M.js";import"./JournalDialog-D1DsrI9a.js";import"./EmptyStateCard-sMvJRayT.js";import"./GrowerRegistration-CDt-qoyN.js";function hr({onSuccess:x,onBack:g}){const[l,v]=r.useState("welcome"),[u,p]=r.useState(!1),[S,a]=r.useState(""),[m,j]=r.useState(""),[R,h]=r.useState(!0),[w,k]=r.useState(""),[C,T]=r.useState(""),[M,B]=r.useState(""),[F,n]=r.useState(""),[y,I]=r.useState(""),[E,z]=r.useState(!1),[A,t]=r.useState(""),W=sr();r.useEffect(()=>{if(!b){h(!1);return}let s=!0;return(async()=>{if(b)try{const{data:{session:_}}=await b.auth.getSession();if(!s)return;_?.user&&(_.user.user_metadata?.membership==="club"?x?.():v("payment"))}catch(_){console.error("Auth check failed:",_)}finally{s&&h(!1)}})(),()=>{s=!1}},[x,b]);const Z=async()=>{if(!b){a("Supabase authentication is not configured for this deployment. Please contact support.");return}if(a(""),!w||!C||!M){a("Please fill in all fields");return}p(!0),j("");try{const{data:s,error:D}=await b.auth.signUp({email:w,password:C,options:{data:{username:M,membership:"none"},emailRedirectTo:typeof window<"u"?`${window.location.origin}/#/`:void 0}});if(D)throw D;s.user&&(t(w),v("verify"),j("Check your inbox to confirm your email, then sign in."))}catch(s){a(s.message||"Signup failed")}finally{p(!1)}},ee=async()=>{if(!b){a("Supabase authentication is not configured for this deployment. Please contact support.");return}if(a(""),j(""),!F||!y){a("Please enter email and password");return}p(!0);try{console.log("ðŸ” Attempting login for:",F);const{data:s,error:D}=await b.auth.signInWithPassword({email:F,password:y});if(console.log("Login response:",{data:s,error:D}),D)throw console.error("Login error:",D),D;if(s.session?.user){if(!s.session.user.email_confirmed_at){await b.auth.signOut(),v("verify"),t(F),a("Please verify your email before entering the garden.");return}console.log("âœ… Login successful!",s.session.user);const _=s.session.user.user_metadata?.membership;console.log("Membership status:",_),_==="club"?(console.log("âœ… User is a club member, granting access"),x?.()):(console.log("âš ï¸ User needs to pay for membership"),v("payment"))}}catch(s){console.error("âŒ Login failed:",s),a(s.message||"Login failed")}finally{p(!1)}},J=async()=>{if(b){if(!F){a('Enter your email first, then tap "Forgot password".');return}p(!0),a(""),j("");try{const s=typeof window<"u"?`${window.location.origin}/#/`:void 0,{error:D}=await b.auth.resetPasswordForEmail(F,{redirectTo:s});if(D)throw D;j("Password reset email sent. Check your inbox.")}catch(s){a(s.message||"Failed to send reset email.")}finally{p(!1)}}},ne=async()=>{if(!(!b||!A)){p(!0),a(""),j("");try{const{error:s}=await b.auth.resend({type:"signup",email:A});if(s)throw s;j("Verification email resent. Check your inbox.")}catch(s){a(s.message||"Failed to resend verification email.")}finally{p(!1)}}},q=async()=>{if(!b){a("Supabase authentication is not configured for this deployment. Please contact support.");return}p(!0),a("");try{const{data:{user:s}}=await b.auth.getUser();if(!s)throw new Error("Not logged in");const{error:D}=await b.auth.updateUser({data:{membership:"club",membership_started:new Date().toISOString(),payment_status:"active",subscription_tier:"premium"}});if(D)throw D;M&&!s.user_metadata?.username&&await b.auth.updateUser({data:{username:M}}),z(!0),setTimeout(()=>{x?.()},2e3)}catch(s){a(s.message||"Payment failed")}finally{p(!1)}};return R?e.jsx(i,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx($,{sx:{color:"#7cb342"}})}):W?e.jsx(i,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:{xs:2,sm:3}},children:e.jsxs(G,{sx:{p:{xs:3,sm:4},borderRadius:6,width:"100%",maxWidth:480,textAlign:"center",background:"rgba(255,255,255,0.15)",backdropFilter:"blur(20px)",border:"2px solid rgba(124, 179, 66, 0.3)"},children:[l==="welcome"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"h3",sx:{mb:2,color:"#fff",fontWeight:900},children:e.jsxs(c,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(i,{component:"img",src:"/hero.png?v=13",alt:"",sx:{width:20,height:20,filter:"drop-shadow(0 0 4px rgba(124, 179, 66, 0.6))"}}),e.jsx("span",{children:"Enter the Garden"}),e.jsx(i,{component:"img",src:"/hero.png?v=13",alt:"",sx:{width:20,height:20,filter:"drop-shadow(0 0 4px rgba(124, 179, 66, 0.6))"}})]})}),e.jsx(o,{variant:"body1",sx:{mb:4,color:"#e0e0e0"},children:"Join the StrainSpotter community to access exclusive features, unlimited scans, and connect with growers worldwide."}),e.jsxs(c,{spacing:2,children:[e.jsx(f,{variant:"contained",size:"large",onClick:()=>v("signup"),sx:{width:"100%",py:2,fontSize:"1.1rem",fontWeight:700,bgcolor:"rgba(124, 179, 66, 0.8)","&:hover":{bgcolor:"rgba(124, 179, 66, 1)"}},children:"Sign Up & Join"}),e.jsx(f,{variant:"outlined",size:"large",onClick:()=>v("login"),sx:{width:"100%",py:2,fontSize:"1.1rem",fontWeight:700,color:"#fff",borderColor:"rgba(124, 179, 66, 0.6)","&:hover":{borderColor:"rgba(124, 179, 66, 1)",bgcolor:"rgba(124, 179, 66, 0.1)"}},children:"I'm Already a Member"}),g&&e.jsx(f,{variant:"text",onClick:g,sx:{color:"#ccc",mt:2},children:"â† Back to Home"})]})]}),l==="signup"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"h4",sx:{mb:3,color:"#fff",fontWeight:900},children:"Create Account"}),S&&e.jsx(H,{severity:"error",sx:{mb:2},children:S}),e.jsxs(c,{spacing:2,children:[e.jsx(N,{label:"Full Name",value:M,onChange:s=>B(s.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{color:"#fff"},"& .MuiInputLabel-root":{color:"#ccc"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(124, 179, 66, 0.5)"}}}),e.jsx(N,{label:"Email",type:"email",value:w,onChange:s=>k(s.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{color:"#fff"},"& .MuiInputLabel-root":{color:"#ccc"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(124, 179, 66, 0.5)"}}}),e.jsx(N,{label:"Password",type:"password",value:C,onChange:s=>T(s.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{color:"#fff"},"& .MuiInputLabel-root":{color:"#ccc"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(124, 179, 66, 0.5)"}}}),e.jsx(f,{variant:"contained",onClick:Z,disabled:u,sx:{width:"100%",py:2,fontSize:"1.1rem",fontWeight:700,bgcolor:"rgba(124, 179, 66, 0.8)","&:hover":{bgcolor:"rgba(124, 179, 66, 1)"}},children:u?e.jsx($,{size:24,sx:{color:"#fff"}}):"Continue to Payment"}),e.jsx(f,{variant:"text",onClick:()=>v("welcome"),sx:{color:"#ccc"},children:"â† Back"})]})]}),l==="login"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"h4",sx:{mb:3,color:"#fff",fontWeight:900},children:"Welcome Back"}),S&&e.jsx(H,{severity:"error",sx:{mb:2},children:S}),m&&e.jsx(H,{severity:"info",sx:{mb:2},children:m}),e.jsxs(c,{spacing:2,children:[e.jsx(N,{label:"Email",type:"email",value:F,onChange:s=>n(s.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{color:"#fff"},"& .MuiInputLabel-root":{color:"#ccc"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(124, 179, 66, 0.5)"}}}),e.jsx(N,{label:"Password",type:"password",value:y,onChange:s=>I(s.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{color:"#fff"},"& .MuiInputLabel-root":{color:"#ccc"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(124, 179, 66, 0.5)"}}}),e.jsx(f,{variant:"contained",onClick:ee,disabled:u,sx:{width:"100%",py:2,fontSize:"1.1rem",fontWeight:700,bgcolor:"rgba(124, 179, 66, 0.8)","&:hover":{bgcolor:"rgba(124, 179, 66, 1)"}},children:u?e.jsx($,{size:24,sx:{color:"#fff"}}):"Login"}),e.jsx(f,{variant:"text",onClick:J,disabled:u||!F,sx:{color:"#ccc"},children:"Forgot password?"}),e.jsx(f,{variant:"text",onClick:()=>v("welcome"),sx:{color:"#ccc"},children:"â† Back"})]})]}),l==="verify"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"h4",sx:{mb:2,color:"#fff",fontWeight:900},children:"Confirm Your Email"}),e.jsxs(o,{variant:"body1",sx:{mb:3,color:"#e0e0e0"},children:["We sent a confirmation link to ",e.jsx("strong",{children:A||w||F||"your email"}),". Tap the link, then return here to finish setting up your account."]}),S&&e.jsx(H,{severity:"error",sx:{mb:2},children:S}),m&&e.jsx(H,{severity:"info",sx:{mb:2},children:m}),e.jsxs(c,{spacing:2,children:[e.jsx(f,{variant:"contained",onClick:ne,disabled:u||!A,sx:{width:"100%",py:2,fontSize:"1.1rem",fontWeight:700,bgcolor:"rgba(124, 179, 66, 0.8)","&:hover":{bgcolor:"rgba(124, 179, 66, 1)"}},children:u?e.jsx($,{size:24,sx:{color:"#fff"}}):"Resend Verification Email"}),e.jsx(f,{variant:"outlined",onClick:()=>{v("login"),a(""),j("")},sx:{color:"#fff",borderColor:"rgba(124, 179, 66, 0.6)"},children:"Return to Sign In"})]})]}),l==="payment"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"h4",sx:{mb:2,color:"#fff",fontWeight:900},children:"Join the Club"}),e.jsx(o,{variant:"body1",sx:{mb:3,color:"#e0e0e0"},children:"Unlock StrainSpotter (20 scans) and add Monthly Member for $4.99/month (200 scans/month + perks)"}),S&&e.jsx(H,{severity:"error",sx:{mb:2},children:S}),E?e.jsx(H,{severity:"success",sx:{mb:2},children:"ðŸŽ‰ Payment successful! Welcome to the Garden!"}):e.jsxs(c,{spacing:2,children:[e.jsxs(i,{sx:{p:3,bgcolor:"rgba(124, 179, 66, 0.1)",border:"1px solid rgba(124, 179, 66, 0.3)",borderRadius:2,mb:2},children:[e.jsx(o,{variant:"h6",sx:{color:"#fff",mb:1},children:"Membership Benefits:"}),e.jsxs(o,{variant:"body2",sx:{color:"#e0e0e0",textAlign:"left"},children:["âœ“ 200 AI scans per month + extra top-ups (50/200/500)",e.jsx("br",{}),"âœ“ Leave reviews & ratings",e.jsx("br",{}),"âœ“ Access to community groups",e.jsx("br",{}),"âœ“ Grow coach & expert tips",e.jsx("br",{}),"âœ“ Strain browser & database",e.jsx("br",{}),"âœ“ Priority support"]})]}),e.jsx(f,{variant:"contained",onClick:q,disabled:u,sx:{width:"100%",py:2,fontSize:"1.1rem",fontWeight:700,bgcolor:"rgba(124, 179, 66, 0.8)","&:hover":{bgcolor:"rgba(124, 179, 66, 1)"}},children:u?e.jsx($,{size:24,sx:{color:"#fff"}}):"Pay $4.99/month"}),e.jsx(o,{variant:"caption",sx:{color:"#ccc",mt:2},children:"Cancel anytime. No commitments."})]})]})]})}):e.jsx(i,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",p:3},children:e.jsxs(G,{sx:{p:4,borderRadius:6,maxWidth:420,textAlign:"center",bgcolor:"rgba(124, 179, 66, 0.1)",border:"1px solid rgba(124, 179, 66, 0.3)",color:"#fff"},children:[e.jsx(o,{variant:"h5",sx:{mb:2,fontWeight:700},children:"Authentication Offline"}),e.jsx(o,{variant:"body2",children:"The StrainSpotter authentication service is not configured for this deployment. Please reach out to the site administrator or try again later."}),g&&e.jsx(f,{variant:"outlined",sx:{mt:3,color:"#fff",borderColor:"rgba(255,255,255,0.4)"},onClick:g,children:"â† Back"})]})})}function xr(){const[x,g]=r.useState(null),[l,v]=r.useState(!1),[u,p]=r.useState(!1),[S,a]=r.useState(!0),m=r.useCallback(async()=>{try{const{data:{session:w}}=await b.auth.getSession(),k=w?.user||null;g(k);let C=null;if(k?.id&&w?.access_token)try{const B=await fetch(`${ue}/api/credits/balance`,{headers:{Authorization:`Bearer ${w.access_token}`}});B.ok&&(C=(await B.json())?.tier||null)}catch(B){console.warn("useMembershipGuard: failed to fetch credit balance",B)}!C&&k&&(k.user_metadata?.membership||"").toLowerCase().includes("club")&&(C="monthly_member");const T=(C||"").toLowerCase();v(new Set(["monthly_member","admin"]).has(T)),p(!1)}catch(w){console.error("Membership check failed:",w)}finally{a(!1)}},[]);r.useEffect(()=>{m();const{data:{subscription:w}}=b.auth.onAuthStateChange(()=>{m()});return()=>w.unsubscribe()},[m]);const h=new Set(["topher.cook7@gmail.com","andrewbeck209@gmail.com","strainspotter25feedback@gmail.com","strainspotter25@gmail.com","admin@strainspotter.com"]).has((x?.email||"").toLowerCase())||!l||!u;return{user:x,isMember:l,isExpired:u,canLogout:h,loading:S,refreshMembership:m}}function We({onBack:x,currentUser:g}){const[l,v]=r.useState(0),[u,p]=r.useState([]),[S,a]=r.useState([]),[m,j]=r.useState(!0),[R,h]=r.useState(!1),[w,k]=r.useState(null),[C,T]=r.useState(5),[M,B]=r.useState(""),F=r.useCallback(async()=>{if(g?.id)try{j(!0);const{data:t,error:W}=await b.from("reviews").select("*, strains(name, slug, type)").eq("user_id",g.id).order("created_at",{ascending:!1});if(W)throw W;p(t||[])}catch(t){console.error("Error fetching my reviews:",t)}finally{j(!1)}},[g?.id]),n=r.useCallback(async()=>{try{const{data:t,error:W}=await b.from("reviews").select("*, strains(name, slug, type)").order("created_at",{ascending:!1}).limit(50);if(W)throw W;a(t||[])}catch(t){console.error("Error fetching all reviews:",t)}},[]);r.useEffect(()=>{g&&F(),n()},[g,F,n]);const y=t=>{k(t),T(t.rating),B(t.comment||""),h(!0)},I=async()=>{try{const{error:t}=await b.from("reviews").update({rating:C,comment:M,updated_at:new Date().toISOString()}).eq("id",w.id);if(t)throw t;h(!1),F(),n()}catch(t){console.error("Error updating review:",t),alert("Failed to update review")}},E=async t=>{if(confirm("Are you sure you want to delete this review?"))try{const{error:W}=await b.from("reviews").delete().eq("id",t);if(W)throw W;F(),n()}catch(W){console.error("Error deleting review:",W),alert("Failed to delete review")}},z=t=>{switch(t?.toLowerCase()){case"indica":return"#9c27b0";case"sativa":return"#ff9800";case"hybrid":return"#4caf50";default:return"#757575"}},A=({review:t,showActions:W=!1})=>e.jsx(De,{sx:{background:"rgba(255,255,255,0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(124, 179, 66, 0.3)",borderRadius:2,mb:2},children:e.jsxs(Be,{children:[e.jsxs(c,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[e.jsxs(c,{spacing:1,flex:1,children:[e.jsxs(c,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(o,{variant:"h6",sx:{color:"#fff",fontWeight:600},children:t.strains?.name||"Unknown Strain"}),t.strains?.type&&e.jsx(X,{label:t.strains.type,size:"small",sx:{bgcolor:z(t.strains.type),color:"#fff",fontSize:"0.7rem",height:20}})]}),e.jsxs(c,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(be,{value:t.rating,readOnly:!0,size:"small"}),e.jsx(o,{variant:"caption",sx:{color:"#aaa"},children:new Date(t.created_at).toLocaleDateString()})]})]}),W&&e.jsxs(c,{direction:"row",spacing:1,children:[e.jsx(V,{size:"small",onClick:()=>y(t),sx:{color:"#7cb342"},children:e.jsx($e,{fontSize:"small"})}),e.jsx(V,{size:"small",onClick:()=>E(t.id),sx:{color:"#f44336"},children:e.jsx(Ae,{fontSize:"small"})})]})]}),t.comment&&e.jsx(o,{variant:"body2",sx:{color:"#e0e0e0",whiteSpace:"pre-line"},children:t.comment})]})});return e.jsxs(i,{sx:{minHeight:"100vh",pt:"calc(env(safe-area-inset-top) + 32px)",px:2,pb:2,background:"none"},children:[x&&e.jsx(f,{size:"small",variant:"outlined",onClick:x,startIcon:e.jsx(pe,{}),sx:{color:"#fff",borderColor:"rgba(124, 179, 66, 0.6)",fontSize:"0.875rem",mb:2,"&:hover":{borderColor:"rgba(124, 179, 66, 1)",bgcolor:"rgba(124, 179, 66, 0.1)"}},children:"Back"}),e.jsxs(c,{direction:"row",alignItems:"center",spacing:2,mb:2,children:[e.jsx(ze,{sx:{fontSize:32,color:"#7cb342"}}),e.jsx(o,{variant:"h5",sx:{color:"#fff",fontWeight:700},children:"Reviews Hub"})]}),e.jsx(G,{sx:{mb:2,background:"rgba(255,255,255,0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(124, 179, 66, 0.3)",borderRadius:2},children:e.jsxs(He,{value:l,onChange:(t,W)=>v(W),sx:{borderBottom:"1px solid rgba(124, 179, 66, 0.3)","& .MuiTab-root":{color:"#fff"},"& .Mui-selected":{color:"#7cb342"}},children:[e.jsx(me,{label:`My Reviews (${u.length})`}),e.jsx(me,{label:"Community Reviews"})]})}),m?e.jsx(i,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx($,{sx:{color:"#7cb342"}})}):e.jsx(i,{children:l===0?e.jsx(i,{children:g?u.length===0?e.jsxs(G,{sx:{p:4,textAlign:"center",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(124, 179, 66, 0.3)",borderRadius:2},children:[e.jsx(o,{variant:"h6",sx:{color:"#fff",mb:2},children:"You haven't written any reviews yet"}),e.jsx(o,{variant:"body2",sx:{color:"#e0e0e0"},children:"Try strains and share your experience with the community!"})]}):e.jsx(i,{children:u.map(t=>e.jsx(A,{review:t,showActions:!0},t.id))}):e.jsx(G,{sx:{p:4,textAlign:"center",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(124, 179, 66, 0.3)",borderRadius:2},children:e.jsx(o,{variant:"h6",sx:{color:"#fff",mb:2},children:"Please log in to view your reviews"})})}):e.jsx(i,{children:S.length===0?e.jsx(G,{sx:{p:4,textAlign:"center",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(124, 179, 66, 0.3)",borderRadius:2},children:e.jsx(o,{variant:"h6",sx:{color:"#fff"},children:"No reviews yet"})}):e.jsx(i,{children:S.map(t=>e.jsx(A,{review:t,showActions:!1},t.id))})})}),e.jsxs(ie,{open:R,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,fullScreen:!0,PaperProps:{sx:{background:"rgba(30, 30, 30, 0.95)",backdropFilter:"blur(20px)",border:"2px solid rgba(124, 179, 66, 0.5)",borderRadius:{xs:0,sm:3},m:0,maxHeight:"100vh"}},children:[e.jsxs(ae,{sx:{color:"#fff",borderBottom:"1px solid rgba(124, 179, 66, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(o,{variant:"h6",children:"Edit Review"}),e.jsx(V,{onClick:()=>h(!1),sx:{color:"#fff"},children:e.jsx(pe,{})})]}),e.jsx(le,{sx:{pt:3},children:e.jsxs(c,{spacing:3,children:[e.jsxs(i,{children:[e.jsx(o,{variant:"body2",sx:{color:"#e0e0e0",mb:1},children:"Rating"}),e.jsx(be,{value:C,onChange:(t,W)=>T(W||1),size:"large"})]}),e.jsx(N,{label:"Your Review",multiline:!0,rows:4,value:M,onChange:t=>B(t.target.value),fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"rgba(124, 179, 66, 0.5)"},"&:hover fieldset":{borderColor:"rgba(124, 179, 66, 0.7)"},"&.Mui-focused fieldset":{borderColor:"#7cb342"}},"& .MuiInputLabel-root":{color:"#fff"}}})]})}),e.jsxs(Ye,{sx:{p:2,borderTop:"1px solid rgba(124, 179, 66, 0.3)"},children:[e.jsx(f,{onClick:()=>h(!1),sx:{color:"#fff"},children:"Cancel"}),e.jsx(f,{onClick:I,variant:"contained",sx:{bgcolor:"#7cb342","&:hover":{bgcolor:"#689f38"}},children:"Update"})]})]})]})}function Fe({user:x,onBack:g,onMessageUser:l,onSendFeedback:v}){const u=x?.email==="topher.cook7@gmail.com"||x?.email==="strainspotter25@gmail.com"||x?.email==="admin@strainspotter.com"||x?.email==="andrewbeck209@gmail.com",[p,S]=r.useState([]),[a,m]=r.useState(!0),[j,R]=r.useState(null),[h,w]=r.useState(!1),[k,C]=r.useState(null),T=async()=>{try{w(!0),R(null);const{data:{session:n}}=await b.auth.getSession(),y=n?.access_token;if(!y)throw new Error("Please log in to view feedback");const I=await fetch(`${ue}/api/feedback/messages`,{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}});if(!I.ok){let z="";try{z=await I.text();try{const A=JSON.parse(z);z=A.error||A.message||z}catch{}}catch{z=`Failed to load feedback: ${I.status} ${I.statusText}`}throw new Error(z||`Failed to load feedback: ${I.status}`)}const E=await I.json();S(Array.isArray(E)?E:[]),R(null)}catch(n){console.error("Error loading feedback:",n);const y=n?.message||n?.toString()||"Failed to load feedback. Please try again.";R(y)}finally{m(!1),w(!1)}},M=async n=>{if(confirm("Are you sure you want to delete this feedback?"))try{C(n);const y=await fetch(`${ue}/api/feedback/messages/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({admin_user_id:x?.id})});if(!y.ok){const I=await y.json();throw new Error(I.error||"Failed to delete feedback")}S(I=>I.filter(E=>E.id!==n))}catch(y){console.error("Error deleting feedback:",y),alert("Failed to delete: "+y.message)}finally{C(null)}};r.useEffect(()=>{T()},[]);const B=n=>{const y=new Date(n),I=new Date,E=I-y,z=Math.floor(E/6e4),A=Math.floor(E/36e5),t=Math.floor(E/864e5);return z<1?"Just now":z<60?`${z}m ago`:A<24?`${A}h ago`:t<7?`${t}d ago`:y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:y.getFullYear()!==I.getFullYear()?"numeric":void 0})},F=n=>new Date(n).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return a?e.jsx(i,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx($,{sx:{color:"#7CB342"}})}):e.jsx(i,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",py:4,px:2},children:e.jsxs(i,{sx:{maxWidth:900,mx:"auto"},children:[e.jsx(G,{sx:{p:3,mb:3,background:"linear-gradient(135deg, rgba(124, 179, 66, 0.1) 0%, rgba(156, 204, 101, 0.05) 100%)",backdropFilter:"blur(10px)",border:"1px solid rgba(124, 179, 66, 0.2)",borderRadius:3},children:e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(c,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(ce,{sx:{bgcolor:"#7CB342",width:56,height:56},children:e.jsx(te,{sx:{fontSize:32}})}),e.jsxs(i,{children:[e.jsx(o,{variant:"h4",sx:{fontWeight:700,color:"#fff",mb:.5},children:"Feedback Reader"}),e.jsxs(o,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:[p.length," ",p.length===1?"submission":"submissions"]})]})]}),e.jsxs(c,{direction:"row",spacing:1,children:[v&&e.jsx(f,{variant:"contained",startIcon:e.jsx(Ue,{}),onClick:v,sx:{bgcolor:"#7CB342",color:"#fff",fontWeight:600,"&:hover":{bgcolor:"#9CCC65"}},children:"Send Feedback"}),e.jsx(Q,{title:"Refresh",children:e.jsx(V,{onClick:T,disabled:h,sx:{color:"#7CB342","&:hover":{bgcolor:"rgba(124, 179, 66, 0.1)"}},children:e.jsx(Ne,{sx:{animation:h?"spin 1s linear infinite":"none","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}})})}),g&&e.jsx(X,{label:"Back",onClick:g,sx:{bgcolor:"rgba(124, 179, 66, 0.2)",color:"#7CB342",fontWeight:600,"&:hover":{bgcolor:"rgba(124, 179, 66, 0.3)"}}})]})]})}),j&&e.jsx(H,{severity:"error",sx:{mb:3},children:j}),!a&&p.length===0&&e.jsxs(G,{sx:{p:6,textAlign:"center",background:"rgba(255,255,255,0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:3},children:[e.jsx(te,{sx:{fontSize:64,color:"rgba(255,255,255,0.3)",mb:2}}),e.jsx(o,{variant:"h6",sx:{color:"#fff",mb:1},children:"No Feedback Yet"}),e.jsx(o,{variant:"body2",sx:{color:"rgba(255,255,255,0.6)"},children:"Feedback submissions will appear here"})]}),e.jsx(c,{spacing:2,children:p.map((n,y)=>e.jsx(De,{sx:{background:"rgba(255,255,255,0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(124, 179, 66, 0.2)",borderRadius:2,transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(124, 179, 66, 0.2)",border:"1px solid rgba(124, 179, 66, 0.4)"}},children:e.jsxs(Be,{sx:{p:3},children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(c,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsx(ce,{src:n.sender?.avatar_url,sx:{bgcolor:"rgba(124, 179, 66, 0.2)",width:32,height:32},children:!n.sender?.avatar_url&&e.jsx(Xe,{sx:{fontSize:18,color:"#7CB342"}})}),e.jsxs(i,{children:[e.jsx(o,{variant:"body2",sx:{color:"#7CB342",fontWeight:600},children:n.sender?.display_name||n.sender?.username||`User ${n.sender_id?.substring(0,8)}`}),e.jsxs(c,{direction:"row",alignItems:"center",spacing:1,children:[e.jsxs(c,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(Ve,{sx:{fontSize:14,color:"rgba(255,255,255,0.5)"}}),e.jsx(o,{variant:"caption",sx:{color:"rgba(255,255,255,0.5)"},children:B(n.created_at)})]}),n.sender?.username&&e.jsxs(o,{variant:"caption",sx:{color:"rgba(255,255,255,0.4)"},children:["â€¢ @",n.sender.username]})]})]})]}),e.jsxs(c,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Q,{title:F(n.created_at),children:e.jsx(X,{label:n.message_type||"text",size:"small",sx:{bgcolor:"rgba(124, 179, 66, 0.2)",color:"#7CB342",fontSize:"0.75rem",fontWeight:600}})}),n.sender_id&&l&&u&&e.jsx(Q,{title:"Message this user",children:e.jsx(V,{size:"small",onClick:()=>l(n.sender_id,n.sender),sx:{color:"#7CB342","&:hover":{bgcolor:"rgba(124, 179, 66, 0.2)"}},children:e.jsx(Je,{sx:{fontSize:18}})})}),u&&e.jsx(Q,{title:"Delete feedback",children:e.jsx(V,{size:"small",onClick:()=>M(n.id),disabled:k===n.id,sx:{color:"#ff5252","&:hover":{bgcolor:"rgba(255, 82, 82, 0.1)"}},children:e.jsx(Ae,{sx:{fontSize:18}})})})]})]}),e.jsx(de,{sx:{mb:2,borderColor:"rgba(255,255,255,0.1)"}}),e.jsx(o,{sx:{color:"#fff",fontSize:"1rem",lineHeight:1.6,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:n.content}),(n.is_flagged||n.is_moderated)&&e.jsxs(c,{direction:"row",spacing:1,mt:2,children:[n.is_flagged&&e.jsx(X,{label:"Flagged",size:"small",color:"warning",sx:{fontSize:"0.7rem"}}),n.is_moderated&&e.jsx(X,{label:`Moderated: ${n.moderation_action||"reviewed"}`,size:"small",color:"info",sx:{fontSize:"0.7rem"}})]})]})},n.id||y))})]})})}function ur({summary:x,loading:g}){const{user:l}=Re(),v=typeof x<"u"||typeof g<"u",{remainingScans:u,isUnlimited:p,loading:S}=lr?.()??{},a=!!p,m=p,j=v?x:{creditsRemaining:u},R=v?!!g:S,h=j?.creditsRemaining??u??null;if(R)return e.jsx(i,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx($,{size:20,sx:{color:"rgba(124, 179, 66, 0.8)"}})});if(h===null&&!m)return null;const w=()=>m?"primary":h===0?"error":h<=10?"warning":"success",k=()=>m?"âˆž Scans":`${h===1/0||h===Number.POSITIVE_INFINITY?"âˆž":h??0} Scans`,C=()=>m?a||j?.membershipTier==="founder_unlimited"?"Unlimited scans (Founder)":"Unlimited scans (Admin)":tier==="free"?`${h} free scans remaining`:tier==="app_purchase"?`${h} scans from your app unlock`:tier==="monthly_member"?`${h} scans remaining (monthly allotment + top-ups)`:`${h} scans remaining`;return e.jsx(Q,{title:C(),arrow:!0,children:e.jsx(X,{icon:e.jsx(qe,{}),label:k(),color:w(),size:"small",sx:{fontWeight:600,background:m?"linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 165, 0, 0.2) 100%)":void 0,backdropFilter:"blur(10px)",border:m?"1px solid rgba(255, 215, 0, 0.5)":void 0,boxShadow:!m&&h<=10?"0 0 10px rgba(255, 152, 0, 0.4)":void 0,animation:!m&&h===0?"pulse 2s ease-in-out infinite":void 0,"@keyframes pulse":{"0%, 100%":{opacity:1},"50%":{opacity:.7}}}})})}function fr({onBack:x,onNavigate:g}){const{user:l,isExpired:v,canLogout:u,loading:p}=xr(),[S,a]=r.useState(!1),[m,j]=r.useState(!1),[R,h]=r.useState(""),[w,k]=r.useState(!1),[C,T]=r.useState(!1),[M,B]=r.useState(!1),[F,n]=r.useState(!1),[y,I]=r.useState(!1),[E,z]=r.useState(!1),[A,t]=r.useState(!1),[W,Z]=r.useState(0),[ee,J]=r.useState(!1),[ne,q]=r.useState(!1),[s,D]=r.useState(!1),[_,se]=r.useState(!1),[Me,Le]=r.useState("home"),[U,re]=r.useState(null),[fe,K]=r.useState("scanner");r.useEffect(()=>{console.log("[Garden] mounted â€“ bundle v2 (seedFinderStrain removed)")},[]);const Pe=async()=>{const d=l?.email==="topher.cook7@gmail.com"||l?.email==="strainspotter25@gmail.com"||l?.email==="admin@strainspotter.com"||l?.email==="andrewbeck209@gmail.com";if(!u&&!d){a(!0);return}try{await b.auth.signOut(),localStorage.clear(),sessionStorage.clear(),x?.()}catch(Y){console.error("Logout failed:",Y)}},Ge=(d,Y)=>{switch(Y){case"scan":O("scan",()=>k(!0));return;case"strains":O("home",()=>T(!0));return;case"reviews":O("home",()=>B(!0));return;case"dispensaries":O("dispensaries",()=>n(!0));return;case"seeds":O("home",()=>I(!0));return;case"groups":O("groups",()=>z(!0));return;case"grow-coach":Z(0),O("home",()=>t(!0));return;case"grow-logbook":Z(ar),O("home",()=>t(!0));return;case"growers":O("growers",()=>J(!0));return;case"feedback-reader":return;default:h(d),j(!0)}},ge=l?.email==="topher.cook7@gmail.com"||l?.email==="strainspotter25@gmail.com"||l?.email==="admin@strainspotter.com"||l?.email==="andrewbeck209@gmail.com",_e=[{title:"AI Strain Scan",icon:e.jsx(he,{}),nav:"scan",color:"#00e676",description:"Identify any strain instantly",image:"ðŸ“·",useEmoji:!0},{title:"Strain Browser",icon:e.jsx(xe,{}),nav:"strains",color:"#7cb342",description:"Explore 1000+ strains",image:"ðŸŒ¿",useEmoji:!0},{title:"Reviews Hub",icon:e.jsx(ze,{}),nav:"reviews",color:"#ffd600",description:"Read & share experiences",image:"â­",useEmoji:!0},{title:"Community Groups",icon:e.jsx(Ke,{}),nav:"groups",color:"#66bb6a",description:"Connect with growers",image:"ðŸ‘¥",useEmoji:!0},{title:"Grow Coach",icon:e.jsx(Qe,{}),nav:"grow-coach",color:"#9ccc65",description:"Expert growing tips",image:"ðŸŒ±",useEmoji:!0},{title:"Grow Logbook",icon:e.jsx(Ze,{}),nav:"grow-logbook",color:"#81c784",description:"Track every stage",image:"ðŸ““",useEmoji:!0},{title:"Grower Directory",icon:e.jsx(er,{}),nav:"growers",color:"#8bc34a",description:"Find local cultivators",image:"ðŸ§‘â€ðŸŒ¾",useEmoji:!0},{title:"Seed Vendors",icon:e.jsx(rr,{}),nav:"seeds",color:"#aed581",description:"Trusted seed sources",image:"ðŸŒ¾",useEmoji:!0},{title:"Dispensaries",icon:e.jsx(tr,{}),nav:"dispensaries",color:"#c5e1a5",description:"Find nearby shops",image:"ðŸª",useEmoji:!0}],P=(d="home")=>{k(!1),T(!1),B(!1),n(!1),I(!1),z(!1),t(!1),J(!1),D(!1),Le(d)},O=(d,Y)=>{P(d),Y?.()},Oe=r.useCallback(d=>{if(console.log("[GardenScanner] scan complete:",d),!d||!d.id&&!d.scanId&&!d.scan_id){console.warn("[GardenScanner] scan complete but no scan/id",d);return}re(d),K("result"),k(!1)},[]),L=(d,Y=Me)=>e.jsx(i,{sx:{display:"flex",flexDirection:"column",height:"100vh",width:"100%",maxWidth:"100vw",overflow:"hidden",overflowX:"hidden",backgroundColor:"background.default"},children:e.jsx(i,{sx:{flex:1,minHeight:0,overflow:"hidden",overflowX:"hidden",width:"100%",maxWidth:"100vw",left:0,right:0,position:"relative"},children:d})});return p?e.jsx(i,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(o,{sx:{color:"#fff"},children:"Loading..."})}):fe==="result"&&U?L(e.jsxs(i,{sx:{display:"flex",flexDirection:"column",height:"100%",width:"100%",maxWidth:"100%",overflow:"hidden",overflowX:"hidden",bgcolor:"transparent"},children:[e.jsxs(i,{sx:{flexShrink:0,display:"flex",alignItems:"center",gap:1.5,p:2,pt:"calc(env(safe-area-inset-top) + 8px)",borderBottom:"1px solid rgba(255,255,255,0.08)",bgcolor:"transparent",backdropFilter:"blur(8px)",zIndex:1},children:[e.jsx(f,{variant:"text",onClick:()=>{K("scanner"),re(null)},sx:{color:"#fff",minWidth:"auto",px:1,fontSize:"1rem",fontWeight:600},children:"â† Back"}),e.jsx(o,{variant:"h6",sx:{fontWeight:600,color:"#fff",flex:1},children:"Scan Result"})]}),e.jsx(i,{sx:{flex:1,minHeight:0,width:"100%",maxWidth:"100vw",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",left:0,right:0,position:"relative",paddingBottom:"calc(env(safe-area-inset-bottom) + 80px)",px:2,py:2},children:e.jsx(ve,{scan:U,result:U,isGuest:!l})})]}),"scan"):w?e.jsx(je,{onBack:()=>{k(!1),K("scanner")},onScanComplete:Oe}):C?e.jsx(Se,{onBack:()=>T(!1)}):M?e.jsx(We,{onBack:()=>B(!1),currentUser:l}):F?e.jsx(ye,{onBack:()=>n(!1)}):E?e.jsx(ke,{onBack:()=>z(!1)}):A?e.jsx(Ce,{onBack:()=>t(!1),initialTab:W}):ee?e.jsx(Ie,{onBack:()=>J(!1)}):s?e.jsx(Fe,{user:l,onBack:()=>D(!1)}):p?L(e.jsx(i,{sx:{minHeight:"70vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(o,{sx:{color:"#fff"},children:"Loading..."})})):w?L(fe==="result"&&U?e.jsxs(i,{sx:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",bgcolor:"transparent"},children:[e.jsxs(i,{sx:{flexShrink:0,display:"flex",alignItems:"center",gap:1.5,p:2,borderBottom:"1px solid rgba(255,255,255,0.08)",bgcolor:"transparent",backdropFilter:"blur(8px)",zIndex:1},children:[e.jsx(f,{variant:"text",onClick:()=>{K("scanner"),re(null)},sx:{color:"#fff",minWidth:"auto",px:1},children:"â† Back"}),e.jsx(o,{variant:"h6",sx:{fontWeight:600,color:"#fff",flex:1},children:"Scan Result"})]}),e.jsx(i,{sx:{flex:1,minHeight:0,width:"100%",maxWidth:"100%",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",paddingBottom:"calc(env(safe-area-inset-bottom) + 80px)",px:2,py:2},children:U?e.jsx(ve,{scan:U,result:U,isGuest:!l}):e.jsx(i,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(o,{variant:"body2",color:"text.secondary",children:"Preparing your resultâ€¦"})})})]}):e.jsx(je,{onBack:()=>P("home"),onScanComplete:d=>{re(d),K("result")}}),"scan"):C?L(e.jsx(Se,{onBack:()=>P("home")})):M?L(e.jsx(We,{onBack:()=>P("home"),currentUser:l})):F?L(e.jsx(ye,{onBack:()=>P("home")}),"dispensaries"):y?L(e.jsx(ir,{onBack:()=>{I(!1),P("home")}})):E?L(e.jsx(ke,{onBack:()=>P("home")}),"groups"):A?L(e.jsx(Ce,{onBack:()=>P("home"),initialTab:W})):ee?L(e.jsx(Ie,{onBack:()=>P("home")}),"growers"):L(s?e.jsx(Fe,{user:l,onBack:()=>P("home"),onSendFeedback:()=>q(!0),onMessageUser:ge?((d,Y)=>{P("home"),z(!0),typeof window<"u"&&sessionStorage.setItem("openDMWith",JSON.stringify({user_id:d,...Y}))}):void 0}):e.jsxs(i,{sx:{display:"flex",flexDirection:"column",height:"100dvh",width:"100%",maxWidth:"100vw",overflow:"hidden",overflowX:"hidden",position:"relative",backgroundImage:"url(./strainspotter-bg.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"scroll",backgroundRepeat:"no-repeat"},children:[e.jsxs(i,{sx:{position:"sticky",top:0,zIndex:10,paddingTop:"calc(env(safe-area-inset-top) * 0.2 + 4px)",paddingBottom:.5,px:1,backgroundColor:"transparent",flexShrink:0},children:[v&&e.jsx(H,{severity:"error",icon:e.jsx(we,{}),sx:{mb:2,py:.75,fontSize:"0.85rem",width:"100%"},children:"Payment overdue. Update payment to continue."}),e.jsx(G,{sx:{p:.5,mb:0,background:"transparent",border:"none",boxShadow:"none",width:"100%",maxWidth:"100%",overflowX:"hidden",overflow:"hidden"},children:e.jsxs(c,{direction:"row",spacing:.25,alignItems:"center",justifyContent:"space-between",sx:{flexWrap:"nowrap",gap:.25},children:[e.jsxs(c,{direction:"row",spacing:.5,alignItems:"center",sx:{flex:1,minWidth:0},children:[e.jsx(ce,{src:"/hero.png?v=13",alt:"StrainSpotter",sx:{width:24,height:24,borderRadius:"50%",overflow:"hidden",border:"1px solid rgba(124, 179, 66, 0.6)",flexShrink:0}}),e.jsx(i,{sx:{minWidth:0,flex:1},children:e.jsx(o,{variant:"body2",sx:{color:"#fff",fontWeight:700,fontSize:"0.8rem",lineHeight:1.1,mb:0},children:"The Garden"})})]}),e.jsxs(c,{direction:"row",spacing:.25,alignItems:"center",sx:{flexWrap:"nowrap",gap:.25,justifyContent:"flex-end"},children:[e.jsx(i,{onClick:()=>se(!0),sx:{cursor:"pointer"},children:e.jsx(ur,{})}),x&&e.jsx(f,{variant:"text",size:"small",onClick:x,sx:{color:"#CDDC39",fontSize:"0.65rem",py:.15,px:.5,minWidth:"auto",textTransform:"none","&:hover":{background:"rgba(124, 179, 66, 0.2)"}},children:"Home"}),e.jsx(f,{variant:"text",size:"small",onClick:Pe,sx:{color:"#CDDC39",fontSize:"0.65rem",py:.15,px:.5,minWidth:"auto",textTransform:"none","&:hover":{background:"rgba(124, 179, 66, 0.2)"}},children:"Logout"})]})]})})]}),e.jsx(i,{sx:{flex:1,minHeight:0,width:"100%",maxWidth:"100%",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",px:1,pb:"calc(env(safe-area-inset-bottom) + 16px)",pt:1,position:"relative",zIndex:1,display:"flex",flexDirection:"column"},children:e.jsx(oe,{container:!0,spacing:1,sx:{width:"100%",maxWidth:"100%",justifyContent:"flex-start",mx:0,flex:1,overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",display:"flex",alignContent:"flex-start",alignItems:"stretch",py:.5,px:{xs:.5,sm:1,md:2}},children:_e.map(d=>e.jsx(oe,{item:!0,xs:4,sm:3,sx:{display:"flex",justifyContent:"center",minHeight:"80px"},children:e.jsxs(G,{onClick:()=>Ge(d.title,d.nav),sx:{p:1,textAlign:"center",cursor:"pointer",background:"rgba(0, 0, 0, 0.3)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:"1px solid rgba(124, 179, 66, 0.3)",borderRadius:2,transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",position:"relative",overflow:"hidden",width:"100%",height:"100%",minHeight:"80px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:.5,"&::before":{content:'""',position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(124, 179, 66, 0.15) 0%, transparent 70%)",opacity:0,transition:"opacity 0.2s ease"},"&:hover":{background:"rgba(124, 179, 66, 0.15)",border:"1px solid rgba(124, 179, 66, 0.6)",transform:"translateY(-1px) scale(1.02)",boxShadow:"0 4px 12px rgba(124, 179, 66, 0.4)","&::before":{opacity:1}},"&:active":{transform:"translateY(0px) scale(0.99)",transition:"all 0.1s ease"}},children:[d.useEmoji?e.jsx(i,{sx:{fontSize:"1.5rem",lineHeight:1,mb:.25,filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4))",transition:"all 0.2s ease",textAlign:"center",width:"100%"},children:d.image}):e.jsx(i,{sx:{width:"32px",height:"32px",mb:.25,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:"1px solid rgba(124, 179, 66, 0.5)",boxShadow:"0 0 8px rgba(124, 179, 66, 0.4)",overflow:"hidden",background:"transparent",transition:"all 0.2s ease",mx:"auto"},children:e.jsx("img",{src:d.image,alt:d.title,style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx(o,{variant:"caption",sx:{color:"#CDDC39",fontWeight:600,fontSize:"0.7rem",lineHeight:1.2,mb:0,display:"block",textShadow:"0 1px 3px rgba(0, 0, 0, 0.7)",transition:"all 0.2s ease",textAlign:"center",width:"100%"},children:d.title})]})},d.nav))})}),e.jsxs(ie,{open:S,onClose:()=>a(!1),fullScreen:!0,PaperProps:{sx:{bgcolor:"#1a1a1a",m:0,maxHeight:"100vh"}},children:[e.jsx(ae,{sx:{bgcolor:"#ff5252",color:"#fff",borderBottom:"1px solid rgba(255,255,255,0.2)"},children:e.jsxs(c,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(we,{}),e.jsx("span",{children:"Cannot Logout"})]})}),e.jsxs(le,{sx:{mt:2,bgcolor:"#1a1a1a",color:"#fff"},children:[e.jsx(o,{variant:"body1",sx:{mb:2},children:"Your membership payment is overdue. You must resolve your payment before you can logout."}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Please update your payment method or contact support for assistance."}),e.jsx(f,{variant:"contained",fullWidth:!0,sx:{mt:3,bgcolor:"#7cb342","&:hover":{bgcolor:"#689f38"}},onClick:()=>a(!1),children:"Update Payment Method"}),e.jsx(f,{variant:"outlined",fullWidth:!0,color:"error",sx:{mt:1},onClick:async()=>{try{await b.auth.signOut(),localStorage.clear(),sessionStorage.clear(),a(!1),x?.()}catch(d){console.error("Force logout failed:",d)}},children:"Force Logout Anyway"}),e.jsx(f,{variant:"text",fullWidth:!0,sx:{mt:1},onClick:()=>a(!1),children:"Close"})]})]}),e.jsxs(ie,{open:m,onClose:()=>j(!1),fullScreen:!0,PaperProps:{sx:{background:"linear-gradient(135deg, rgba(124, 179, 66, 0.95) 0%, rgba(104, 159, 56, 0.95) 100%)",backdropFilter:"blur(20px)",borderRadius:{xs:0,sm:4},border:"2px solid rgba(255, 255, 255, 0.2)",m:0,maxHeight:"100vh"}},children:[e.jsx(ae,{sx:{color:"#fff",fontWeight:700,borderBottom:"1px solid rgba(255,255,255,0.2)"},children:"ðŸš§ Coming Soon!"}),e.jsxs(le,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",p:4},children:[e.jsxs(o,{sx:{color:"#fff",mb:2},children:[e.jsx("strong",{children:R})," is currently under development."]}),e.jsx(o,{sx:{color:"#e0e0e0",mb:2},children:"We're working hard to bring you this feature soon! In the meantime, enjoy scanning strains and exploring the community."}),e.jsx(f,{variant:"contained",fullWidth:!0,sx:{mt:2,bgcolor:"#fff",color:"#7cb342","&:hover":{bgcolor:"#f0f0f0"}},onClick:()=>j(!1),children:"Got it!"})]})]}),e.jsx(Ee,{color:"success","aria-label":"feedback",onClick:()=>ge?D(!0):q(!0),sx:{position:"fixed",bottom:16,right:16,zIndex:1e3,bgcolor:"#7cb342","&:hover":{bgcolor:"#689f38"}},children:e.jsx(te,{})}),e.jsx(Te,{open:ne,onClose:()=>q(!1),user:l}),e.jsx(cr,{open:_,onClose:()=>se(!1),currentTier:"free",creditsRemaining:0})]}))}function Rr({onNavigate:x}){const[g,l]=r.useState(!1),[v,u]=r.useState(!1),[p,S]=r.useState(!1),[a,m]=r.useState(!1),{user:j}=Re(),R=dr(j?.email),h=()=>{g||(l(!0),typeof x=="function"&&x("scanner"),setTimeout(()=>{l(!1)},2500))};if(v&&!p)return e.jsx(hr,{onSuccess:()=>{S(!0)},onBack:()=>u(!1)});if(p)return e.jsx(fr,{onNavigate:x,onBack:()=>{S(!1),u(!1)}});const w=[{emoji:"ðŸ“·",title:"AI Strain Scan",description:"Snap a photo of any cannabis flower, and our advanced AI instantly identifies the strain from our database of over 35,000 varieties. Get detailed strain information including genetics, effects, terpene profiles, and growing characteristics in seconds."},{emoji:"ðŸŒ¿",title:"Strain Browser",description:"Explore our comprehensive database of 35,000+ cannabis strains. Search by name, effects, terpenes, THC/CBD content, or growing difficulty. Discover new favorites, compare strains, and learn about genetics, lineage, and cultivation tips for each variety."},{emoji:"â­",title:"Reviews Hub",description:"Read and share authentic strain reviews from real users. Get insights on effects, taste, growing experience, and medical benefits. Rate your experiences and help the community discover the best strains for their needs."},{emoji:"ðŸ‘¥",title:"Community Groups",description:"Connect with fellow growers, enthusiasts, and cannabis professionals. Join discussions, share grow diaries, ask questions, and build your network. Whether you're a beginner or master cultivator, find your tribe here."},{emoji:"ðŸŒ±",title:"Grow Coach",description:"Access expert growing tips, guides, and tutorials covering everything from seed to harvest. Learn about lighting, nutrients, pest management, training techniques, and harvesting. Level up your cultivation skills with proven strategies."},{emoji:"ðŸ““",title:"Grow Logbook",description:"Track every stage of your grow with detailed journaling. Record watering schedules, nutrient feeds, environmental conditions, and observations. Monitor progress with photos, set reminders, and build a searchable history of all your grows."},{emoji:"ðŸ§‘â€ðŸŒ¾",title:"Grower Directory",description:"Find local cultivators, breeders, and cannabis professionals in your area. Browse profiles, connect with growers, share knowledge, and discover local expertise. Whether you're looking for mentors or collaborators, find them here."},{emoji:"ðŸŒ¾",title:"Seed Vendors",description:"Discover trusted seed banks and breeders with verified reviews from the community. Compare prices, shipping options, and genetics. Find the perfect seeds for your next grow with confidence from reputable sources."},{emoji:"ðŸª",title:"Dispensaries",description:"Locate nearby dispensaries using your location. Find shops with your favorite strains in stock, check hours and menus, read reviews, and get directions. Never wonder where to find quality cannabis again."}];return e.jsxs(i,{component:"main",sx:{width:"100vw",backgroundColor:"#0a0f0a !important",position:"fixed",top:0,left:0,right:0,bottom:0,overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",zIndex:100},children:[e.jsx(or,{maxWidth:"md",sx:{position:"relative",zIndex:1,py:4,px:3,pb:8,minHeight:"auto"},children:e.jsxs(c,{spacing:4,alignItems:"center",sx:{width:"100%"},children:[e.jsxs(c,{spacing:3,alignItems:"center",textAlign:"center",sx:{width:"100%"},children:[e.jsx(i,{sx:{width:120,height:120,borderRadius:"50%",background:"linear-gradient(135deg, rgba(124, 179, 66, 0.2) 0%, rgba(156, 204, 101, 0.2) 100%)",border:"3px solid rgba(124, 179, 66, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 40px rgba(124, 179, 66, 0.6), 0 0 80px rgba(124, 179, 66, 0.3), inset 0 0 20px rgba(124, 179, 66, 0.1)",animation:"pulse 3s ease-in-out infinite","@keyframes pulse":{"0%, 100%":{boxShadow:"0 0 40px rgba(124, 179, 66, 0.6), 0 0 80px rgba(124, 179, 66, 0.3)"},"50%":{boxShadow:"0 0 60px rgba(124, 179, 66, 0.8), 0 0 120px rgba(124, 179, 66, 0.4)"}}},children:e.jsx("img",{src:"/hero.png?v=13",alt:"StrainSpotter",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}})}),e.jsx(o,{variant:"h3",sx:{fontFamily:"Poppins, sans-serif",fontWeight:900,background:"linear-gradient(135deg, #CDDC39 0%, #9CCC65 50%, #7CB342 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontSize:{xs:"2.5rem",sm:"3rem"},lineHeight:1.1,textShadow:"0 0 30px rgba(124, 179, 66, 0.5)",filter:"drop-shadow(0 0 20px rgba(124, 179, 66, 0.4))"},children:"StrainSpotter"}),e.jsx(o,{variant:"h6",sx:{color:"#d0d0d0",fontSize:"1.1rem",maxWidth:600,lineHeight:1.6,textShadow:"0 2px 8px rgba(0, 0, 0, 0.5)",fontWeight:400},children:"AI-powered cannabis strain identification and comprehensive grow journaling platform"}),e.jsxs(c,{direction:{xs:"column",sm:"row"},spacing:2,sx:{width:"100%",maxWidth:500,mt:1},children:[e.jsxs(f,{variant:"contained",size:"large",fullWidth:!0,onClick:h,disabled:g,startIcon:e.jsx(he,{}),sx:{py:1.5,textTransform:"none",fontSize:"1.05rem",fontWeight:600,opacity:g?.8:1,borderRadius:"16px",background:"linear-gradient(135deg, #7CB342 0%, #9CCC65 50%, #CDDC39 100%)",boxShadow:"0 8px 32px rgba(124, 179, 66, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.2)",transition:"all 0.15s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:g?"none":"translateY(-3px) scale(1.02)",boxShadow:"0 12px 40px rgba(124, 179, 66, 0.7), 0 0 60px rgba(124, 179, 66, 0.3)",background:"linear-gradient(135deg, #8BC34A 0%, #AED581 50%, #CDDC39 100%)"},"&:active":{transform:"translateY(-1px) scale(0.98)",transition:"all 0.05s ease"}},children:[g&&e.jsx(i,{component:"span",className:"scan-button-spinner"}),g?"Opening scannerâ€¦":"Scan a Strain"]}),e.jsx(f,{variant:"outlined",size:"large",fullWidth:!0,onClick:()=>u(!0),startIcon:e.jsx(xe,{}),sx:{py:1.5,fontSize:"1.05rem",fontWeight:700,borderRadius:"16px",border:"2px solid rgba(124, 179, 66, 0.7)",color:"#CDDC39",background:"rgba(124, 179, 66, 0.1)",backdropFilter:"blur(10px)",textTransform:"none",transition:"all 0.15s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 16px rgba(124, 179, 66, 0.2), inset 0 1px 0 rgba(124, 179, 66, 0.2)","&:hover":{border:"2px solid rgba(124, 179, 66, 1)",background:"rgba(124, 179, 66, 0.2)",transform:"translateY(-3px) scale(1.02)",boxShadow:"0 8px 32px rgba(124, 179, 66, 0.4), inset 0 1px 0 rgba(124, 179, 66, 0.3)",color:"#fff"},"&:active":{transform:"translateY(-1px) scale(0.98)",transition:"all 0.05s ease"}},children:"Enter the Garden"})]}),e.jsx(o,{variant:"body2",sx:{color:"#7CB342",fontSize:"0.95rem",fontWeight:600,mt:1},children:"35,000+ strains â€¢ Instant AI identification â€¢ Complete grow tools â€¢ Active community"})]}),e.jsx(de,{sx:{width:"100%",borderColor:"rgba(124, 179, 66, 0.3)"}}),e.jsxs(c,{spacing:3,sx:{width:"100%"},children:[e.jsx(o,{variant:"h5",sx:{color:"#CDDC39",fontWeight:700,textAlign:"center",textShadow:"0 2px 8px rgba(0, 0, 0, 0.5)"},children:"Everything You Need for Cannabis"}),e.jsx(oe,{container:!0,spacing:2,children:w.map((k,C)=>e.jsx(oe,{item:!0,xs:12,sm:6,children:e.jsx(G,{sx:{p:3,background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(12px)",border:"2px solid rgba(124, 179, 66, 0.3)",borderRadius:3,transition:"all 0.2s ease",height:"100%",display:"flex",flexDirection:"column","&:hover":{background:"rgba(124, 179, 66, 0.15)",border:"2px solid rgba(124, 179, 66, 0.6)",transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(124, 179, 66, 0.4)"}},children:e.jsxs(c,{direction:"row",spacing:2,alignItems:"flex-start",children:[e.jsx(i,{sx:{fontSize:"3rem",lineHeight:1,flexShrink:0,filter:"drop-shadow(0 3px 6px rgba(0, 0, 0, 0.4))"},children:k.emoji}),e.jsxs(i,{sx:{flex:1,minWidth:0},children:[e.jsx(o,{variant:"h6",sx:{color:"#CDDC39",fontWeight:700,mb:1,fontSize:"1.25rem",textShadow:"0 2px 4px rgba(0, 0, 0, 0.7)"},children:k.title}),e.jsx(o,{variant:"body2",sx:{color:"#d0d0d0",lineHeight:1.6,fontSize:"0.95rem",textShadow:"0 1px 3px rgba(0, 0, 0, 0.5)"},children:k.description})]})]})})},C))})]}),e.jsx(de,{sx:{width:"100%",borderColor:"rgba(124, 179, 66, 0.3)"}}),e.jsxs(c,{spacing:2,alignItems:"center",sx:{width:"100%",pb:4},children:[e.jsx(o,{variant:"h6",sx:{color:"#CDDC39",fontWeight:700,textAlign:"center",textShadow:"0 2px 8px rgba(0, 0, 0, 0.5)"},children:"Ready to Get Started?"}),e.jsxs(c,{direction:{xs:"column",sm:"row"},spacing:2,sx:{width:"100%",maxWidth:500},children:[e.jsx(f,{variant:"contained",size:"large",fullWidth:!0,onClick:h,disabled:g,startIcon:e.jsx(he,{}),sx:{py:1.5,textTransform:"none",fontSize:"1.05rem",fontWeight:600,borderRadius:"16px",background:"linear-gradient(135deg, #7CB342 0%, #9CCC65 50%, #CDDC39 100%)",boxShadow:"0 8px 32px rgba(124, 179, 66, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.2)","&:hover":{background:"linear-gradient(135deg, #8BC34A 0%, #AED581 50%, #CDDC39 100%)",transform:"translateY(-2px)"}},children:"Start Scanning"}),e.jsx(f,{variant:"outlined",size:"large",fullWidth:!0,onClick:()=>u(!0),startIcon:e.jsx(xe,{}),sx:{py:1.5,fontSize:"1.05rem",fontWeight:700,borderRadius:"16px",border:"2px solid rgba(124, 179, 66, 0.7)",color:"#CDDC39",background:"rgba(124, 179, 66, 0.1)",backdropFilter:"blur(10px)",textTransform:"none","&:hover":{border:"2px solid rgba(124, 179, 66, 1)",background:"rgba(124, 179, 66, 0.2)",transform:"translateY(-2px)"}},children:"Explore the Garden"})]})]}),R&&e.jsx(f,{variant:"text",size:"small",startIcon:e.jsx(nr,{fontSize:"small"}),onClick:()=>x("admin-status"),sx:{color:"#A5D6A7",textTransform:"none"},children:"Status & debug tools"})]})}),e.jsx(Ee,{color:"primary",size:"small",onClick:()=>m(!0),sx:{position:"fixed",bottom:16,right:16,zIndex:1e3,background:"linear-gradient(135deg, #7CB342 0%, #9CCC65 100%)",boxShadow:"0 4px 12px rgba(124, 179, 66, 0.3)",width:48,height:48},children:e.jsx(te,{fontSize:"small"})}),e.jsx(Te,{open:a,onClose:()=>m(!1),user:null})]})}export{Rr as default};
