import{r as f,j as e,F as y,P as v,T as i,B as t,S as C,at as R,au as F,av as $,H as z,aw as I}from"./react-vendor-CxfKVgr3.js";import{u as E}from"./useCreditBalance-DnPtH5jr.js";import{c as W}from"./App-JmJcCWdD.js";const A=I`
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.05);
  }
`,B=I`
  0%, 100% {
    box-shadow: 0 0 10px rgba(124, 179, 66, 0.5);
  }
  50% {
    box-shadow: 0 0 20px rgba(124, 179, 66, 0.8), 0 0 30px rgba(124, 179, 66, 0.6);
  }
`,j={uploading:{title:"Uploading Image",description:"Securely uploading your photo to our serversâ€¦",why:"We compress and encrypt your image for fast, secure processing.",icon:"ðŸ“¤",color:"#2196F3"},processing:{title:"Processing Image",description:"Extracting text and visual featuresâ€¦",why:"Running Google Vision AI to read labels and analyze your photo.",icon:"ðŸ”",color:"#FF9800"},matching:{title:"Matching Strain",description:"Searching our database of 35,000+ strainsâ€¦",why:"Comparing visual features and text against our comprehensive strain library.",icon:"ðŸ§¬",color:"#9C27B0"},analyzing:{title:"AI Analysis",description:"Decoding label details and generating insightsâ€¦",why:"Our AI extracts THC, CBD, effects, flavors, and warnings from the label.",icon:"ðŸ¤–",color:"#00BCD4"},finalizing:{title:"Finalizing Results",description:"Compiling your complete strain breakdownâ€¦",why:"Combining all analyses into a comprehensive result card.",icon:"âœ¨",color:"#4CAF50"}};function H({phase:r,message:l,progress:c=null,error:h=null}){const[p,d]=f.useState(0),[g,w]=f.useState(new Set),[m,P]=f.useState(!1),x=Object.keys(j),a=r?x.indexOf(r):-1;f.useEffect(()=>{if(a>=0){d(a);const o=new Set;for(let u=0;u<a;u++)o.add(x[u]);w(o)}},[r,a,x]);const n=r?j[r]:null;return h?e.jsx(y,{in:!0,children:e.jsxs(v,{sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, rgba(244, 67, 54, 0.2), rgba(0, 0, 0, 0.6))",border:"2px solid rgba(244, 67, 54, 0.5)",textAlign:"center"},children:[e.jsx(i,{variant:"h6",sx:{color:"#ff5252",mb:1,fontWeight:700},children:"âš ï¸ Scan Error"}),e.jsx(i,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.9)"},children:h})]})}):!r||!n?null:e.jsx(t,{sx:{width:"100%",maxWidth:600,mx:"auto"},children:e.jsx(y,{in:!0,children:e.jsxs(v,{sx:{p:4,borderRadius:4,background:"linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(20, 30, 20, 0.9))",border:`2px solid ${n.color}40`,boxShadow:`0 8px 32px ${n.color}20`,position:"relative",overflow:"hidden"},children:[e.jsx(t,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`linear-gradient(135deg, ${n.color}10, transparent)`,animation:`${B} 2s ease-in-out infinite`,pointerEvents:"none"}}),e.jsxs(C,{spacing:3,sx:{position:"relative",zIndex:1},children:[e.jsxs(t,{sx:{textAlign:"center"},children:[e.jsx(R,{in:!0,children:e.jsx(i,{variant:"h3",sx:{fontSize:"3rem",mb:1,animation:r?`${A} 2s ease-in-out infinite`:"none"},children:n.icon})}),e.jsx(F,{direction:"down",in:!0,children:e.jsx(i,{variant:"h5",sx:{color:n.color,fontWeight:700,mb:.5,textShadow:`0 0 10px ${n.color}40`},children:n.title})}),e.jsx(i,{variant:"body1",sx:{color:"rgba(255, 255, 255, 0.9)",mb:1},children:l||n.description}),n.why&&e.jsxs(t,{sx:{mt:2,p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",cursor:"pointer",transition:"all 0.2s","&:hover":{background:"rgba(255, 255, 255, 0.08)"}},onClick:()=>P(!m),children:[e.jsxs(i,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[m?"â–¼":"â–¶"," Why does this take time?"]}),m&&e.jsx(y,{in:m,children:e.jsx(i,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.85)",mt:1,textAlign:"left",fontSize:"0.875rem",lineHeight:1.6},children:n.why})})]})]}),c!==null?e.jsxs(t,{children:[e.jsx($,{variant:"determinate",value:c,sx:{height:8,borderRadius:4,bgcolor:"rgba(255, 255, 255, 0.1)","& .MuiLinearProgress-bar":{borderRadius:4,background:`linear-gradient(90deg, ${n.color}, ${n.color}CC)`,boxShadow:`0 0 10px ${n.color}60`}}}),e.jsxs(i,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",mt:.5,display:"block",textAlign:"right"},children:[Math.round(c),"%"]})]}):e.jsx(t,{children:e.jsx($,{sx:{height:8,borderRadius:4,bgcolor:"rgba(255, 255, 255, 0.1)","& .MuiLinearProgress-bar":{borderRadius:4,background:`linear-gradient(90deg, ${n.color}, ${n.color}CC)`,boxShadow:`0 0 10px ${n.color}60`,animation:"pulse 2s ease-in-out infinite"}}})}),e.jsxs(t,{children:[e.jsx(C,{direction:"row",spacing:1,justifyContent:"center",flexWrap:"wrap",children:x.map((o,u)=>{const s=j[o],b=r===o,S=g.has(o),k=u>a;return e.jsx(z,{label:s.icon,size:"small",sx:{bgcolor:S?`${s.color}30`:b?`${s.color}40`:"rgba(255, 255, 255, 0.1)",color:S||b?s.color:"rgba(255, 255, 255, 0.5)",border:`1px solid ${S?s.color:b?`${s.color}80`:"rgba(255, 255, 255, 0.2)"}`,fontWeight:b?700:500,fontSize:"1.2rem",height:36,width:36,borderRadius:"50%",animation:b?`${A} 2s ease-in-out infinite`:"none",transition:"all 0.3s ease",opacity:k?.4:1}},o)})}),e.jsxs(i,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.6)",mt:1,display:"block",textAlign:"center"},children:["Step ",a+1," of ",x.length]})]})]})]})})})}function O(){const{remainingScans:r,isUnlimited:l,loading:c,error:h}=E(),{isFounder:p,founderUnlimitedEnabled:d}=W(),g=Number.isFinite(r)?r:l?Number.POSITIVE_INFINITY:0;return{canScan:p&&d||l||g>0,remainingScans:g,isFounder:!!(p&&d),summary:{remainingScans:g,isUnlimited:l||p&&d},loading:c,error:h}}export{H as A,O as u};
